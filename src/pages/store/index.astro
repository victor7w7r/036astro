---
import Layout from '@/layouts/Layout.astro';

import { CookieState, StorageState } from '@/components';

import '@/styles/store.css';
---

<Layout title='Store Page'>
  <div class='page-container'>
    <div class='store-container'>
      <div class='card-container'>
        <h3 class='store-title'>
          Write anything in this form and send
        </h3>
        <div class='relative z-0 w-64 mx-auto mt-6'>
          <input
            type='text'
            class='peer input-design inputable'
            placeholder=' '
          />
          <label for='floating' class='floating-design'>
            here
          </label>
        </div>
        <div class='store-btn'>
          <button class='standard-button send-button'>
            Send
          </button>
        </div>
        <CookieState client:load />
        <StorageState client:load />
      </div>
      <div class='centered-button-ctn'>
        <a
          class='standard-button'
          href='/'
        >
          Go to Store
        </a>
      </div>
    </div>
  </div>
</Layout>

<script>
import Cookies from 'js-cookie';

import { listenTheme } from '@/events';
import { setData, theme } from '@/stores';
import { buttonCallback, inputValue } from '@/utils';

const { control } = theme.get();

document.querySelectorAll<HTMLDivElement>('.card-container')
  .forEach((container) => {
    container.classList.add(control);
    listenTheme((theme) => {
      const classes = container.classList;
      classes.remove(classes[classes.length - 1]!);
      classes.add(theme.control);
    });
  });

buttonCallback('send-button', () => {
  const value = inputValue('inputable');
  Cookies.set('data', value);
  setData(value);
});
</script>